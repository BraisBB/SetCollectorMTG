# =================================================================
# Configuración MySQL para SetCollectorMTG
# Optimizada para sistema JWT y contenedores Podman
# =================================================================

[mysqld]
# Configuración de charset
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

# Configuración de red
bind-address=0.0.0.0
port=3306
max_connections=200
max_allowed_packet=256M

# Configuración InnoDB para rendimiento
innodb_buffer_pool_size=512M
innodb_flush_log_at_trx_commit=2
innodb_file_per_table=1
innodb_flush_method=O_DIRECT
innodb_log_file_size=128M
innodb_log_buffer_size=16M

# Configuración de query cache (deshabilitado en MySQL 8+)
# query_cache_type=OFF

# Configuración de logging
slow_query_log=1
slow_query_log_file=/var/log/mysql/mysql-slow.log
long_query_time=2
log_error=/var/log/mysql/error.log
general_log=0

# Configuración de timeouts
wait_timeout=300
interactive_timeout=300
lock_wait_timeout=120

# Configuración SQL mode estricta
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

# Configuración para contenedores (Podman/Docker)
skip-name-resolve
skip-host-cache

# Optimizaciones específicas para Podman rootless
# Reducir uso de memoria para entornos con menos privilegios
tmp_table_size=64M
max_heap_table_size=64M
thread_cache_size=50
thread_stack=256K

# Configuración de seguridad para contenedores
secure_file_priv=/var/lib/mysql-files/

[mysql]
default-character-set=utf8mb4

[client]
default-character-set=utf8mb4 